# [니땅내땅](https://ddangddang.site/)

<b>야외 활동, 이웃과의 소통을 유도하는 땅따먹기 게임</b>
<br />

## 니땅내땅 소개

### MBTI 그룹 땅따먹기 👨‍💻

<br />
같은 동에서 서로 다른 MBTI 성격을 가진 사람들이 모여 땅따먹기를 하며 이웃과의 소통을 유도하는 게임입니다.

<br/>

### 프로젝트 기간

-   2022.04.29 ~ 2022.06.03

<br/>

### 😎 팀 멤버

<table>
   <tr>
    <td align="center"><b><a href="https://github.com/pol-dev-shinroo">김재혁</a></b></td>
    <td align="center"><b><a href="https://github.com/piggggggggy">박용태</a></b></td>
     <td align="center"><b><a href="https://github.com/reload1bronze">박재철</a></b></td>
    <td align="center"><b><a href="https://github.com/moto4321">기우석</a></b></td>
    <td align="center"><b><a href="https://github.com/diasm3">박세명</a></b></td>
  </tr>
  <tr>
     <td align="center"><a href="https://github.com/pol-dev-shinroo"><img src="https://avatars.githubusercontent.com/u/102004753?v=4" width="100px" /></a></td>
     <td align="center"><a href="https://github.com/piggggggggy"><img src="https://avatars.githubusercontent.com/u/83635051?v=4" width="100px" /></a></td>
     <td align="center"><a href="https://github.com/reload1bronze"><img src="https://avatars.githubusercontent.com/u/55050662?v=4" width="100px" /></a></td>
     <td align="center"><a href="https://github.com/moto4321"><img src="https://avatars.githubusercontent.com/u/67586085?v=4" width="100px" /></a></td>
    <td align="center"><a href="https://github.com/diasm3"><img src="https://avatars.githubusercontent.com/u/56494905?v=4" width="100px" /></a></td>
    
  </tr>
  <tr>
     <td align="center"><b>Frontend</b></td>
    <td align="center"><b>Frontend</b></td>
    <td align="center"><b>Backend</b></td>
    <td align="center"><b>Backend</b></td>
    <td align="center"><b>Backend</b></td>
  </tr>
</table>

<br/>
<br/>

## 프로젝트 주요 기능

#### 📲 카카오 로그인 / 이메일 로그인

-   카카오를 통한 소셜로그인으로 간단하게 가입할 수 있어요. 이메일 회원가입에서는 중복 가입이 안되도록 중복확인을 눌러야 합니다. 본인의 mbti 를 선택 하실 수 있습니다


#### 🕹 3가지 종류의 퀘스트 수행

-   피드 작성하기, 몬스터 제거하기, 타임어택 3가지 종류의 퀘스트가 지도위에 뿌려져요. 해당 위치에 가야만 퀘스트를 수행할 수 있습니다.

-   몬스터 퀘스트는 몬스터와 직접 게임을 통해서 점수를 올릴 수 있습니다
-   #### 🏆 달성한 업적 확인

-   퀘스트를 일정 횟수 수행하면 뱃지를 드려요. 마이페이지에서 자신이 달성한 업적을 퀘스트 타입별로 확인할 수도 있어요.

#### 🥳 피드와 댓글을 통해 이웃사촌들과 소통하세요

-   특정지역에서 피드를 남겨보세요. 다른 사람이 올린 피드에 댓글로 소통하고 좋아요를 눌러보세요.

#### 📱 채팅페이지

-   좀 더 즉각적인 소통을 위해서 채팅방을 이용하세요. 닉네임이 공개되지 않는 익명채팅입니다.

좀 더 즉각적인 소통을 위해서 채동네 팅방을 이용하세요.

#### 🐨 랭킹시스템

-   자신이 쌓은 포인트로 랭킹페이지에서 top 10 랭킹을 확인할 수 있습니다.



<br/>
<br/>

## Architecture

<img src="https://user-images.githubusercontent.com/56494905/171617309-64305fc7-d16e-45e2-b0d8-94af77eea136.png" width="1000px" />

<br/>
<br/>

## 🛠 Tools

#### Frontend

<p>
  <p>
   <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
  <img src="https://img.shields.io/badge/html-E34F26?style=for-the-badge&logo=html5&logoColor=white">
  <img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white">
  <img src="https://img.shields.io/badge/axios-007CE2?style=for-the-badge&logo=axios&logoColor=white" >
  <br>
  <img src="https://img.shields.io/badge/React-61DAFB?style=for-the-badge&logo=React&logoColor=black">
  <img src="https://img.shields.io/badge/React_Router-CA4245?style=for-the-badge&logo=react-router&logoColor=white">
  <img src="https://img.shields.io/badge/redux-%23593d88.svg?style=for-the-badge&logo=redux&logoColor=white" >
        <img src="https://img.shields.io/badge/redux-toolkit-%23593d88.svg?style=for-the-badge&logo=redux&logoColor=white" >
  <br>
  <img src="https://img.shields.io/badge/styled--components-DB7093?style=for-the-badge&logo=styled-components&logoColor=white" >
  <img src="https://img.shields.io/badge/MUI-%230081CB.svg?style=for-the-badge&logo=mui&logoColor=white" >
        <img src="https://img.shields.io/badge/Kakao Map Api-007CE2?style=for-the-badge&logo=KaKao Map Api&logoColor=white">
        <img src="https://img.shields.io/badge/lodash-F7DF1E?style=for-the-badge&logo=lodash&logoColor=white">
  <br>
</p>
</p>

#### Backend

<p>
  <img src="https://img.shields.io/badge/nestjs-E0234E?style=for-the-badge&logo=nestjs&logoColor=white">
  <img src="https://img.shields.io/badge/typescript-2F74C0?style=for-the-badge&logo=typescript&logoColor=white">
  <img src="https://img.shields.io/badge/typeorm-E93625?style=for-the-badge&logo=typeorm&logoColor=white">
  <img src="https://img.shields.io/badge/mariadb-003545?style=for-the-badge&logo=mariadb&logoColor=white">
  <img src="https://img.shields.io/badge/MongoDB-47A248?style=for-the-badge&logo=MongoDB&logoColor=white">
  <img src="https://img.shields.io/badge/jwt-000000?style=for-the-badge&logo=JSONWebTokens&logoColor=white">
  <img src="https://img.shields.io/badge/Socket.io-010101?style=for-the-badge&logo=Socket.io&logoColor=white">
  <img src="https://img.shields.io/badge/Swagger-85EA2D?style=for-the-badge&logo=Swagger&logoColor=black">
  <img src="https://img.shields.io/badge/Jest-C21325?style=for-the-badge&logo=Jest&logoColor=white">
  
</p>

#### Infrastructure

<p>
  <img src="https://img.shields.io/badge/AWS-%23FF9900.svg?style=for-the-badge&logo=amazon-aws&logoColor=white" > 
  <img src="https://img.shields.io/badge/AWS amplify-CA4245?style=for-the-badge&logo=AWS amplify&logoColor=white">
  <img src="https://img.shields.io/badge/docker-F7A81B?style=for-the-badge&logo=docker&logoColor=white">
  <img src="https://img.shields.io/badge/elasticbeanstalk-F7A81B?style=for-the-badge&logo=elastic&logoColor=white">
</p>

#### Dev tools

<p> 
  <img src="https://img.shields.io/badge/Visual%20Studio%20Code-0078d7.svg?style=for-the-badge&logo=visual-studio-code&logoColor=white">
  <img src="https://img.shields.io/badge/git-%23F05033.svg?style=for-the-badge&logo=git&logoColor=white">
  <img src="https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&logo=github&logoColor=white">
  <img src="https://img.shields.io/badge/vim-%23121011.svg?style=for-the-badge&logo=vim&logoColor=white">
</p>

#### Design

<p>
  <img src="https://img.shields.io/badge/Figma-F24E1E?style=for-the-badge&logo=Figma&logoColor=white"/>
  <img src="https://img.shields.io/badge/Adobe XD-FF61F6?style=for-the-badge&logo=Adobe XD&logoColor=white"/>
  <img src="https://img.shields.io/badge/Adobe Illustrator-FF9A00?style=for-the-badge&logo=Adobe Illustrator&logoColor=white"/>
  <img src="https://img.shields.io/badge/Adobe Photoshop-31A8FF?style=for-the-badge&logo=Adobe Photoshop&logoColor=white"/>
  <img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white">
  <img src="https://img.shields.io/badge/mui-1572B6?style=for-the-badge&logo=mui&logoColor=white">
</p>

<br>
<br>

## 🔥 Trouble Shooting

### Issue1

첫 페이지 부터 500에러가 발행하고 페이지가 무한 로딩이 걸리는 문제발생

#### 원인

현재 위치 좌표값을 Geolocation 메소드를 통해 받아오고, 그 이후 카카오 지도 API를 통해 위치 정보를 주소값으로 받아오는데, 처음부터 Gelocation 값이 오류또는 해외에 있을경우에는 처음 초기화면서 부터 서비스를 불가하는 현상이 발생하였습니다.

#### 해결 순서

예외 처리를 통해 카카오API의 리턴값이 받을 수 없다면, 로컬스토리지에 미리 저장해둔 최초의 정상적인 좌표값을 불러와 서비스를 이용후 다시 좌표값을 받아 제대로된 서비스를 이용하는 방식으로 해결하였습니다.


### Issue2

React useState에서 값이 null 일때의 예외처리

#### 원인

컴포넌트 안에서 api호출을 하여 데이터를 가져오고 그 값을 useState로 저장할 경우 렌더링이 두번 일어나기 때문에 첫번째 렌더링시에 useState값이 null일 경우 예외처리를 해야합니다. 


#### 해결 순서

처음에는 optional chaining으로 해결을 하려고 하였으나, 가독성 문제와 optional chaining을 사용하는 상황이 따로 있기때문에 이럴경우 단순 예외처리로 useState값이 null 이 아닐경우 컴포넌트를 렌더링 시켜서 문제를 해결할 수 있습니다. 

### Issue3

실시간 좌표값을 geolocation함수로 호출할때에 setTimeOut 으로 일정 시간이 지난후에 api 를 호출하는 방법이 있었습니다. 
하지만 이럴 경우 불필요한 api 를 호출하여 performance에 지장이 있습니다. 

#### 원인

setTimeOut 함수를 사용시 임이의 시간범위내 계속하여 불필요한 api 호출을 하게됩니다.  


#### 해결 순서

setTimeOut 대신 일정범위 이동시 api 를 호출하도록 해결을 하였습니다. 

### Issue4

로그인 유지시 매번 새로고침시 서버에 로그인 유지 관련 api 를 호출하였고 이렬경우 불필요한 경우까지 api 를 호출하여 성능을 떨어뜨립니다. 

#### 원인

로그인 유지 api를 매번 새로고침 할때마다 호출하도록 설계를 했었습니다. 지속적으로 로그인 유지에 대한 비용이 너무 많이 드는거 같았습니다.


#### 해결 방법

axios에 내장된 interceptor를 이용해서 401 에러가 발생했을시에는 refresh토큰이 있는지 없는지 판단하고 만약 있다며 서버에서 refresh토큰을 발급 받을 수 있도록 했습니다.


```
